---
title: deinterlacing 2323 telecine video into fields for visual analysis
author: tracey pooh
type: post
date: 2012-02-19T09:19:57+00:00

categories:
  - video
tags:
  - coding
  - deinterlace
  - mplayer
  - video

---
Having some challenging fun working on trying to deinterlace some toughie clips
  
from my [brother&#8217;s][1] upcoming feature film.

His camera recorded in 24fps (24000/1001 to you fellow geeks ðŸ˜Ž and smartly
  
did a &#8220;2323&#8221; writing/stretching of it to 60i (60 half-frames).
  
After correcting back to 24fps progressive most of his clips, he&#8217;s found ~10-20%
  
are not able to be put back together visually properly even with CineTools
  
and manually specifying the &#8220;cadence&#8221; and sequence starting frames, etc&#8230;

<a href="//poohBot.com/2012/02/19/deinterlacing-2323-telecine-video-into-fields-for-visual-analysis/screen-shot-2012-02-19-at-12-54-41-am/" rel="attachment wp-att-987"><img src="//poohBot.com/wp-content/uploads/2012/02/Screen-shot-2012-02-19-at-12.54.41-AM-1024x796.png" alt="" title="(uninter)&quot;lacer&quot; program having fun with" width="640" height="497" class="size-large wp-image-987" srcset="https://poohBot.com/wp-content/uploads/2012/02/Screen-shot-2012-02-19-at-12.54.41-AM-1024x796.png 1024w, https://poohBot.com/wp-content/uploads/2012/02/Screen-shot-2012-02-19-at-12.54.41-AM-300x233.png 300w, https://poohBot.com/wp-content/uploads/2012/02/Screen-shot-2012-02-19-at-12.54.41-AM.png 1488w" sizes="(max-width: 640px) 100vw, 640px" /></a>

I started with code that I wrote to take a small segment of a video
  
and split the interlaced frames into 1/2 height &#8220;fields&#8221; and then drop them
  
down to grayscale to compare them all to each other to find the best matches
  
(to verify the cadence is right and/or the fields aren&#8217;t &#8220;off by 1&#8221;, etc..)

It uses mplayer and ImageMagick (&#8220;convert&#8221; and &#8220;compare&#8221;) for pretty high-quality
  
extraction of frames from the source video into the 1/2 height &#8220;fields&#8221;.

So I just do about 0.3 seconds to get 10 frames, and thus 20 1/2 frame fields for analyzing.
  
It will output the best matches of frames. For example:
  
`<br />
  php lacer.php  good.mov  0.5  0.8<br />
` 

I then extended it into a web page (screenshot above, where I&#8217;m left-shifting one field by 4 pixels for visual inspection)
  
[PHP script][2] <== try it out online! ([source][3])
  
that uses some CSS cleverness (clip property is your BFF!) to interlace together a pair of fields.
  
It supports:

  * field swapping (move one 1/2 image to be the 1st, 3rd, 5th, etc. lines &#8212; if it was
  
    previously the 2nd, 4th, 6th, etc. lines)
  * left and right shifting a field
  * pairing arbitrary fields
  * showing a &#8220;raw&#8221; 60i telecined sequence
  * showing the 60i sequence as a &#8220;deinterlaced&#8221; 24P sequence

 [1]: http://rjfilms.com
 [2]: /lacer.php
 [3]: //poohBot.com/wp-content/uploads/2012/02/lacer.php_.txt